{% extends "base.html" %}
{% block title %}Weighing Session{% endblock %}

{% block content %}
<a href="{{ url_for('home') }}" class="btn btn-link px-0 mb-3">&larr; Back to dashboard</a>

<h2 class="mb-3">Weighing Session</h2>

<form action="{{ url_for('weighting_session') }}" method="get" class="row g-3">
  <input type="hidden" name="ui" value="1">

  <div class="col-md-6">
    <label class="form-label">Session ID</label>
    <input name="session_id" class="form-control" value="{{ request.args.get('session_id', '') }}" placeholder="Enter session ID">
  </div>

  <div class="col-12">
    <button class="btn btn-primary">Search</button>
  </div>
</form>

{% if sessions is not none %}
  <hr class="my-4">

  {% if sessions %}
    <h4>Session Results ({{ sessions|length }} found)</h4>
    <table class="table table-sm table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>Truck</th>
          <th>Bruto</th>
          <th>Truck Tara</th>
          <th>Neto</th>
        </tr>
      </thead>
      <tbody>
        {% for session in sessions %}
          <tr>
            <td>{{ session.session_id }}</td>
            <td>{{ session.truck or "na" }}</td>
            <td>{{ session.bruto }} kg</td>
            <td>{{ session.truckTara if session.truckTara is not none else "na" }}</td>
            <td>{{ session.neto if session.neto is not none else "na" }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">No sessions found. Please search by Session ID.</p>
  {% endif %}
{% endif %}

{% endblock %}
